@{
    ViewData["Title"] = "Ana Sayfa";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />

<style>
    /* Chatbot Floating Icon */
    #chatbot-icon {
        position: fixed;
        bottom: 25px;
        right: 25px;
        width: 70px;
        height: 70px;
        background: #0047A0; /* MK Primary Color */
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 34px;
        cursor: pointer;
        box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        transition: 0.25s ease;
        z-index: 9999;
    }

        #chatbot-icon:hover {
            transform: scale(1.1);
            background: #0072CE;
        }

    /* Slide Chat Panel */
    #chatbot-panel {
        position: fixed;
        right: -420px;
        bottom: 0;
        width: 400px;
        height: 600px;
        background: white;
        border-radius: 16px 16px 0 0;
        box-shadow: -4px 0 20px rgba(0,0,0,0.25);
        transition: right 0.35s ease;
        z-index: 9998;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }

    .panel-header {
        background: #0047A0;
        color: white;
        padding: 14px;
        font-size: 18px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .panel-close {
        cursor: pointer;
        font-size: 22px;
    }

    #chatbot-inner {
        flex: 1;
        overflow-y: auto;
        background: #f7f8fa;
    }

    /* Mobil uyum */
    @@media (max-width: 600px) {
        #chatbot-panel {
            width: 100%;
            height: 90%;
            right: -100%;
        }
    }
</style>

<!-- Floating Chatbot Icon -->
<div id="chatbot-icon">💬</div>

<!-- Slide Chat Panel -->
<div id="chatbot-panel">
    <div class="panel-header">
        Millet Kütüphanesi Asistanı
        <span class="panel-close" onclick="closeChatbot()">✖</span>
    </div>

    <div id="chatbot-inner"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/chat.js"></script>

<script>
    const panel = document.getElementById("chatbot-panel");
    const icon = document.getElementById("chatbot-icon");

    icon.addEventListener("click", function () {
        fetch("/Widget/ChatWidget")
            .then(r => r.text())
            .then(html => {
                document.getElementById("chatbot-inner").innerHTML = html;
                panel.style.right = "25px"; // panel açılıyor
                icon.style.display = "none";
            });
    });

    function closeChatbot() {
        panel.style.right = "-420px"; // panel kapanıyor
        icon.style.display = "flex";
    }
</script>
